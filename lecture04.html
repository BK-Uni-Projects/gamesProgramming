<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Programming Tips and Representing the World (a little)</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/css/theme/black.css" id="theme"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
tex2jax: {
  inlineMath: [["\\(", "\\)"]],
  displayMath: [["\\[", "\\]"]],
  ignoreClass: "nostem|nolatexmath"
},
asciimath2jax: {
  delimiters: [["\\$", "\\$"]],
  ignoreClass: "nostem|noasciimath"
},
TeX: { equationNumbers: { autoNumber: "none" } }
});</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.4.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/lib/css/zenburn.css" rel="stylesheet"><script>document.write( '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section class="title"><h1>Programming Tips and Representing the World (a little)</h1></section><section id="_overview"><h2>Overview</h2><div class="ulist"><ul><li><p>Some programming tips</p></li><li><p>Representing our "World"</p></li><li><p>Simulation</p></li></ul></div></section>
<section><section id="_accessing_data_from_other_functions"><h2>Accessing data from other functions</h2><div class="ulist"><ul><li><p>Our game loop should be calling other functions</p><div class="ulist"><ul><li><p>How do those functions access the data they need</p></li></ul></div></li></ul></div><div class="listingblock"><div class="content"><pre class="highlight"><code>	while(running) {
		SDL_LogDebug(SDL_LOG_CATEGORY_APPLICATION,
			"Game Loop start: %i\n", SDL_GetTicks());

		process_input();
		update();
		render();
	}</code></pre></div></div></section><section id="_what_data"><h2>What data ?</h2><div class="ulist"><ul><li><p>What data does each need access to?</p><div class="olist arabic"><ol class="arabic"><li><p>process_input ??</p></li><li><p>update ??</p></li><li><p>render ??</p></li></ol></div></li><li><p>Should we limit the data that these functions can access?</p><div class="ulist"><ul><li><p>discuss &#8230;&#8203;</p></li></ul></div></li><li><p>Should they be able to change that data?</p></li></ul></div></section><section id="_what_data_2"><h2>What data? 2</h2><div class="olist arabic"><ol class="arabic"><li><p>process_input</p><div class="ulist"><ul><li><p>game control state</p></li></ul></div></li><li><p>update</p><div class="ulist"><ul><li><p>world representation</p></li></ul></div></li><li><p>render</p><div class="ulist"><ul><li><p>world representation</p></li></ul></div></li></ol></div></section><section id="_ways_of_providing_access_to_data"><h2>Ways of providing access to data?</h2><div class="ulist"><ul><li><p>How can we let our functions access the data they need?</p></li></ul></div></section><section id="_ways_of_providing_access_to_data_2"><h2>Ways of providing access to data? 2</h2><div class="ulist"><ul><li><p>How can we let our functions access the data they need?</p><div class="olist arabic"><ol class="arabic"><li><p>pass pointers/reference to the data??</p></li><li><p>pass the values of the data??</p></li><li><p>make the data global??</p></li></ol></div></li></ul></div></section></section>
<section><section id="_separating_parts_of_game_loop"><h2>Separating parts of Game Loop</h2><div class="ulist"><ul><li><p>The three main parts of our Game Loop should each only do some things</p></li></ul></div></section><section id="__code_process_input_code"><h2><code>process_input</code></h2><div class="ulist"><ul><li><p><code>process_input</code> should <strong>only</strong> process input</p><div class="ulist"><ul><li><p>it should set controller state - <strong>what</strong> has happened in the world</p><div class="ulist"><ul><li><p>abstract things, rather than low-level events</p></li><li><p>e.g. "jump", not "button X pressed"</p></li></ul></div></li><li><p>it shouldn&#8217;t change the world state</p></li><li><p>it shouldn&#8217;t render anything</p></li></ul></div></li></ul></div></section><section id="__code_update_simulation_code"><h2><code>Update Simulation</code></h2><div class="ulist"><ul><li><p>AKA stepSimulation (take a simulation step)</p></li><li><p><code>update</code> should <strong>only</strong> update the world state</p><div class="ulist"><ul><li><p>according to the world state and controller state</p></li><li><p>and how long to simulate for (duration)</p></li><li><p>it shouldn&#8217;t render anything</p></li><li><p>it shouldn&#8217;t handle input</p></li></ul></div></li></ul></div></section><section id="__code_render_code"><h2><code>Render</code></h2><div class="ulist"><ul><li><p><code>render</code> should <strong>only</strong> render</p><div class="ulist"><ul><li><p>according to the world state</p></li><li><p>it shouldn&#8217;t change the world state</p></li><li><p>it shouldn&#8217;t handle input</p></li></ul></div></li></ul></div></section><section id="_limiting_access_and_influence"><h2>Limiting access and influence</h2><div class="ulist"><ul><li><p>You could use C++ features to limit what each of these functions can do</p><div class="ulist"><ul><li><p>e.g. <code>render</code> could be passed a <strong>constant</strong> reference to the "World"</p><div class="ulist"><ul><li><p>so that C++ won&#8217;t let <code>render</code> change the World state</p></li><li><p>attempting to change would be a compile-error</p></li></ul></div></li></ul></div></li></ul></div></section></section>
<section><section id="_function_method_signatures_and_reading_the_documentation"><h2>Function/method signatures and reading the documentation!!</h2><div class="ulist"><ul><li><p>The function/method signature tells you what you need to give the function, or order to use it</p></li><li><p>Good documentation should explain what the function/method does and how to use it</p></li><li><p>Many libraries provide only C interfaces, even if we&#8217;re using C++</p><div class="ulist"><ul><li><p>e.g. SDL and OpenGL</p></li></ul></div></li></ul></div></section><section id="_sdl_rendercopy_signature"><h2>SDL_RenderCopy signature</h2><div class="listingblock"><div class="title"><a href="https://wiki.libsdl.org/SDL_RenderCopy">SDL_RenderCopy</a></div><div class="content"><pre class="highlight"><code class="cpp language-cpp">int SDL_RenderCopy(SDL_Renderer*   renderer,
                   SDL_Texture*    texture,
                   const SDL_Rect* srcrect,
                   const SDL_Rect* dstrect);</code></pre></div></div>
<div class="ulist"><ul><li><p>What is each parameter?</p><div class="ulist"><ul><li><p>What do they control?</p></li></ul></div></li><li><p>What does the <code>const</code> do?</p><div class="ulist"><ul><li><p><a href="http://en.cppreference.com/w/cpp/language/cv">C++ reference</a></p></li></ul></div></li></ul></div></section><section id="_sdl_getwindowsize_signature"><h2>SDL_GetWindowSize signature</h2><div class="listingblock"><div class="title"><a href="https://wiki.libsdl.org/SDL_GetWindowSize">SDL_GetWindowSize</a></div><div class="content"><pre class="highlight"><code class="cpp language-cpp">void SDL_GetWindowSize(SDL_Window* window,
                       int*        w,
                       int*        h);</code></pre></div></div>
<div class="ulist"><ul><li><p>How does this return data??</p><div class="ulist"><ul><li><p>the function returns <code>void</code> !!!</p></li></ul></div></li></ul></div></section><section id="_sdl_getwindowsize_example_use"><h2>SDL_GetWindowSize example use</h2><div class="listingblock"><div class="title">Example</div><div class="content"><pre class="highlight"><code class="cpp language-cpp">SDL_Window window* SDL_CreateWindow( "title",
  SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED,
  800, 600,
  NULL);

int width;
int height;
SDL_GetWindowSize(window, &amp;width, &amp;height);
SDL_assert(width == 800);
SDL_assert(height == 600);</code></pre></div></div></section></section>
<section><section id="_representing_our_world"><h2>Representing our "World"</h2><div class="ulist"><ul><li><p>So far our "World" consists of merely a single Sprite</p><div class="ulist"><ul><li><p>things will get more complex and larger</p></li></ul></div></li><li><p>What can we control about this Sprite at the moment?</p><div class="ulist"><ul><li><p>??</p></li><li><p>Or what properties does it have??</p></li></ul></div></li></ul></div></section><section id="_our_lonely_sprite"><h2>Our lonely Sprite</h2><div class="ulist"><ul><li><p>Position - where on the screen</p><div class="ulist"><ul><li><p>in what coordinate system</p></li></ul></div></li><li><p>Size</p><div class="ulist"><ul><li><p>in what coordinate system</p></li></ul></div></li><li><p>Texture</p></li></ul></div></section><section id="_what_do_need_to_able_to_do_with_our_sprite"><h2>What do need to able to do with our Sprite?</h2><div class="ulist"><ul><li><p>???</p></li></ul></div></section><section id="_what_do_need_to_able_to_do_with_our_sprite_2"><h2>What do need to able to do with our Sprite 2</h2><div class="ulist"><ul><li><p>Move it</p><div class="ulist"><ul><li><p>at what rate? (velocity?)</p></li></ul></div></li><li><p>Render it?</p></li><li><p>Animate it?</p></li><li><p>Do some kind of collisions with it?</p></li><li><p>&#8230;&#8203;</p></li></ul></div></section></section>
<section id="_classes_for_things"><h2>Classes for things</h2><div class="ulist"><ul><li><p>We&#8217;re using C++, so we should have classes for our objects</p><div class="ulist"><ul><li><p>to encapsulate data</p></li><li><p>to allow functions on that data</p></li><li><p>these <strong>don&#8217;t</strong> have to be the same classes &#8230;&#8203;</p><div class="ulist"><ul><li><p>perhaps contrasting with "normal" OOP</p></li></ul></div></li></ul></div></li></ul></div></section>
<section id="_class_inheritance"><h2>Class inheritance</h2><div class="ulist"><ul><li><p>You could use an inheritance model with your classes</p><div class="ulist"><ul><li><p>but <strong>DON&#8217;T</strong> use multiple-inheritance - there be dragons</p></li></ul></div></li></ul></div>
<div class="imageblock stretch" style=""><img src="assets/blue-dragon-ii.jpg" alt="blue dragon ii" height="100%"></div></section>
<section><section id="_entity_component_systems"><h2>Entity-Component-Systems</h2><div class="ulist"><ul><li><p>There are many ways to use classes for programming Games</p><div class="ulist"><ul><li><p>especially with regards to efficiency and flexibility</p></li></ul></div></li><li><p>The Entity-Component model is an alternative to inheritance</p><div class="ulist"><ul><li><p>Composition vs. Inheritance</p></li></ul></div></li></ul></div></section><section id="_entities"><h2>Entities</h2><div class="ulist"><ul><li><p>Each type of thing is an Entity - e.g. a Dragon</p></li><li><p>Entities have no logic</p></li><li><p>Each Entity has a set of components that belong to it, or each entity refers to</p><div class="ulist"><ul><li><p>Position</p></li><li><p>Texture</p></li><li><p>Velocity</p></li></ul></div></li></ul></div></section><section id="_components"><h2>Components</h2><div class="ulist"><ul><li><p>Each component holds <strong>data</strong></p><div class="ulist"><ul><li><p>the data needed for some behaviour, such as rendering</p></li></ul></div></li></ul></div></section><section id="_system"><h2>System</h2><div class="ulist"><ul><li><p>Each "system" processes through a certain set of entities</p><div class="ulist"><ul><li><p>such as all those with a Position and Velocity, and updates the positions</p></li><li><p>such as all those with a Position and Sprite, and renders them</p></li></ul></div></li></ul></div></section><section id="_entity_component_systems_2"><h2>Entity-Component-Systems</h2><div class="ulist"><ul><li><p>Could be overkill for within this module</p><div class="ulist"><ul><li><p>So might an inheritance heirarchy with more than 2 levels</p></li></ul></div></li><li><p>The separation of Data and Logic allows for significant performance enhancements</p><div class="ulist"><ul><li><p>See <a href="https://youtu.be/rX0ItVEVjHc">Data-Oriented Design</a></p></li><li><p>Especially related to caching</p></li></ul></div></li><li><p>See Recommended Reading</p></li></ul></div></section></section>
<section id="_c"><h2>C++</h2><div class="ulist"><ul><li><p>Make CLASSES !!!!</p></li><li><p>Make class hierarchies if/when appropriate</p></li></ul></div></section>
<section><section id="_multiple_files_in_your_project"><h2>Multiple files in your project</h2><div class="ulist"><ul><li><p>You presently only have one source file - <code>main.cpp</code></p></li><li><p>Your present <code>CMakeLists.txt</code> file only try to make an <code>exe</code> out of that single file</p></li></ul></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="cmake language-cmake">project(ConanTest)
cmake_minimum_required(VERSION 2.8.12)

include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup()

add_executable(conanTest main.cpp)
target_link_libraries(conanTest ${CONAN_LIBS})

file(COPY assets DESTINATION bin)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
set_property(DIRECTORY PROPERTY VS_STARTUP_PROJECT "conanTest")</code></pre></div></div></section><section id="_multiple_files_in_your_project_2"><h2>Multiple files in your project 2</h2><div class="ulist"><ul><li><p>You should make new classes in new files (generally)</p><div class="ulist"><ul><li><p>with a <code>.h</code> and a <code>.cpp</code>, usually</p></li></ul></div></li><li><p>You&#8217;ll need to tell cmake to compile those files into your program also</p><div class="ulist"><ul><li><p>add them to list of files in <code>add_executable</code></p></li></ul></div></li><li><p>What should you add?</p></li></ul></div></section><section id="_multiple_files_in_your_project_3"><h2>Multiple files in your project 3</h2><div class="ulist"><ul><li><p>Here&#8217;s an example</p><div class="ulist"><ul><li><p>there are other ways of doing this</p></li></ul></div></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="cmake language-cmake">project(ConanTest)
cmake_minimum_required(VERSION 2.8.12)

include(${CMAKE_BINARY_DIR}/conanbuildinfo.cmake)
conan_basic_setup()

add_executable(conanTest main.cpp myClass.h myClass.cpp)
target_link_libraries(conanTest ${CONAN_LIBS})

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
set_property(DIRECTORY PROPERTY VS_STARTUP_PROJECT "conanTest")</code></pre></div></div></section><section id="_globbing_in_cmake"><h2>Globbing in CMake</h2><div class="ulist"><ul><li><p>Listing all the source files for executable might become a list annoying</p></li><li><p>CMake supports globbing and recursive globbing</p><div class="dlist"><dl><dt class="hdlist1">glob</dt><dd><p>match files names according to a pattern. e.g. <code>*.txt</code></p></dd></dl></div></li><li><p>We <strong>could</strong> generate a list of files to add to our executable with a glob</p><div class="ulist"><ul><li><p><strong>WARNING:</strong> the CMake people recommend <strong>AGAINST</strong> this practice.</p></li></ul></div></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="cmake language-cmake">file(GLOB source_list "*.cpp" "*.h")
add_executable(conanTest ${source_list} )
target_link_libraries(conanTest ${CONAN_LIBS})</code></pre></div></div></section></section>
<section><section id="_making_new_files_in_visual_studio"><h2>Making new files in Visual Studio</h2><div class="ulist"><ul><li><p>WARNING: Visual Studio will by default put new items in project&#8217;s root</p><div class="ulist"><ul><li><p>in your <strong><code>build</code></strong> folder <span class="icon"><i class="fa fa-frown-o"></i></span></p></li></ul></div></li><li><p>REMINDER: <strong>Everything</strong> in your <code>build</code> folder should be considered temporary</p><div class="ulist"><ul><li><p>you want to be able to remove the entire folder do get a clean system</p></li></ul></div></li></ul></div></section><section id="_making_new_files_in_visual_studio_2"><h2>Making new files in Visual Studio 2</h2><div class="ulist"><ul><li><p><strong>IF</strong> you use "Add New Items" (or equivalent) in Visual Studio</p><div class="ulist"><ul><li><p><strong>REMEMBER</strong> to change the path where it creates the new file</p></li><li><p>to the root of your project (e.g. <code>gamesProgramming</code>)</p></li><li><p><strong>REMEMBER</strong> to add the files to your <code>CMakeLists.txt</code> file also</p><div class="ulist"><ul><li><p>Your project will still build without this</p></li><li><p><strong>BUT</strong> only until your rerun CMake (e.g. when you moves machines)</p></li></ul></div></li></ul></div></li><li><p>You <strong>could</strong> choose to make a <code>src</code> folder at this point, to collect all your source code</p><div class="ulist"><ul><li><p>to make things more organised</p></li><li><p>you&#8217;ll need to update your <code>CMakeLists.txt</code> files to match the new locations</p></li></ul></div></li></ul></div></section></section>
<section id="_recommended_reading"><h2>Recommended Reading</h2><div class="ulist"><ul><li><p><a href="http://gamedev.stackexchange.com/questions/31473/what-is-the-role-of-systems-in-a-component-based-entity-architecture" class="bare">http://gamedev.stackexchange.com/questions/31473/what-is-the-role-of-systems-in-a-component-based-entity-architecture</a></p></li><li><p><a href="http://www.gamedev.net/page/resources/_/technical/game-programming/understanding-component-entity-systems-r3013" class="bare">http://www.gamedev.net/page/resources/_/technical/game-programming/understanding-component-entity-systems-r3013</a></p></li><li><p><a href="http://gameprogrammingpatterns.com/component.html" class="bare">http://gameprogrammingpatterns.com/component.html</a></p></li><li><p><a href="https://spin.atomicobject.com/2016/04/22/entity-component-systems/" class="bare">https://spin.atomicobject.com/2016/04/22/entity-component-systems/</a></p></li><li><p><a href="http://entity-systems.wikidot.com/" class="bare">http://entity-systems.wikidot.com/</a></p></li><li><p><a href="https://www.raywenderlich.com/24878/introduction-to-component-based-architecture-in-games" class="bare">https://www.raywenderlich.com/24878/introduction-to-component-based-architecture-in-games</a></p></li><li><p><a href="https://youtu.be/rX0ItVEVjHc" class="bare">https://youtu.be/rX0ItVEVjHc</a></p></li></ul></div></section></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/lib/js/head.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'black',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.3.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>